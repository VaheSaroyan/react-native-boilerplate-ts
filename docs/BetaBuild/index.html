<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="search" type="application/opensearchdescription+xml" title="React Native Boilerplate ts" href="/react-native-boilerplate-ts/opensearch.xml"><title data-react-helmet="true">Beta build | React Native Boilerplate ts</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Beta build | React Native Boilerplate ts"><meta data-react-helmet="true" name="description" content="🚧 It&#x27;s a Work In Progress section 🚧"><meta data-react-helmet="true" property="og:description" content="🚧 It&#x27;s a Work In Progress section 🚧"><meta data-react-helmet="true" property="og:url" content="https://vahesaroyan.github.io/react-native-boilerplate-ts/docs/BetaBuild"><link data-react-helmet="true" rel="shortcut icon" href="/react-native-boilerplate-ts/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://vahesaroyan.github.io/react-native-boilerplate-ts/docs/BetaBuild"><link rel="stylesheet" href="/react-native-boilerplate-ts/styles.98922d82.css">
<link rel="preload" href="/react-native-boilerplate-ts/styles.80ce7e63.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/runtime~main.2bb91438.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/main.c1faeead.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/1.9a05bac7.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/2.1323f2fb.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/19.dce75683.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/22.8f2cd069.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/935f2afb.6fcf0dd2.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/17896441.27d65e94.js" as="script">
<link rel="preload" href="/react-native-boilerplate-ts/52f0a39e.eb810e28.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/react-native-boilerplate-ts/"><img class="navbar__logo" src="/react-native-boilerplate-ts/img/logo_transparent.png" alt="React Native Boilerplate ts"><strong class="navbar__title">RNBoilerplate</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/react-native-boilerplate-ts/docs/Introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VaheSaroyan/react-native-boilerplate-ts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/react-native-boilerplate-ts/"><img class="navbar__logo" src="/react-native-boilerplate-ts/img/logo_transparent.png" alt="React Native Boilerplate ts"><strong class="navbar__title">RNBoilerplate</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/react-native-boilerplate-ts/docs/Introduction">Docs</a></li><li class="menu__list-item"><a href="https://github.com/VaheSaroyan/react-native-boilerplate-ts" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-boilerplate-ts/docs/Introduction">React Native Boilerplate</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-boilerplate-ts/docs/Installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/react-native-boilerplate-ts/docs/Configuration">Configuration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/Theme">Theme 🎨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/ThemesAndDarkMode">Themes and darkMode 🌗</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/SplashScreenLoadingData">Splash screen &amp; loading data 💾</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/ReduxStore">Redux store 🗃️</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/AddALangTranslation">Add a lang translation 🌐</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-boilerplate-ts/docs/UsingFlipper">Using Flipper 🐛</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/react-native-boilerplate-ts/docs/BetaBuild">Beta build</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Beta build</h1></header><div class="markdown"><p>🚧 It&#x27;s a Work In Progress section 🚧</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="distributing-beta-builds"></a>Distributing beta builds<a aria-hidden="true" tabindex="-1" class="hash-link" href="#distributing-beta-builds" title="Direct link to heading">#</a></h1><p>Developers love writing React Native code but no one likes deploying React Native app or distributing beta builds.  </p><p>All your headaches will disappear with this documentation and the amazing <a href="https://fastlane.tools/" target="_blank" rel="noopener noreferrer">Fastlane</a> tool :)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="before-you-start"></a>Before you start<a aria-hidden="true" tabindex="-1" class="hash-link" href="#before-you-start" title="Direct link to heading">#</a></h2><p>You need a Mac. I&#x27;m sorry, but if you are a Windows user, you can stop reading right now.<br>
Fastlane will not work on Windows PC. But in all cases, if you need to deploy your app on IOS, you must have a Mac.</p><p>Let&#x27;s explain which tools we are using to distribute beta builds:</p><ul><li><a href="https://fastlane.tools/" target="_blank" rel="noopener noreferrer">Fastlane</a>, the easiest way to automate beta deployments and releases for your iOS and Android apps. It handles all tedious tasks like generating screenshots, dealing with code signing and releasing your application.</li><li><a href="https://developer.apple.com/testflight/" target="_blank" rel="noopener noreferrer">TestFlight</a>, part of App Store Connect, let you build your iOS app and invite internal or external users to test it</li><li><a href="https://support.google.com/googleplay/android-developer/answer/3131213?hl=fr" target="_blank" rel="noopener noreferrer">Google Play</a>, which does the same job as TestFlight for Android apps</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">If you love this documentation, give us a star, you will be a ray of sunshine in our lives :)</span></div></div></div></div></div><p><em>This documentation is a part of a React Native project template for building solid applications through separation of concerns between the UI, state management and business logic.</em>
<em>Just navigate to the <a href="https://github.com/vahesaroyan/react-native-boilerplate" target="_blank" rel="noopener noreferrer">project home page</a> if you want to see more.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installing-fastlane"></a>Installing Fastlane<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installing-fastlane" title="Direct link to heading">#</a></h2><p>First you need to install Fastlane on your Mac. Follow these steps:</p><ol><li>Install the latest Xcode command line tools:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ xcode-select --install</span></div></div></div></div></div><ol start="2"><li>Install Ruby using <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a>:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ brew install ruby</span></div></div></div></div></div><ol start="3"><li>Install Fastlane with RubyGems:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo gem install fastlane -NV</span></div></div></div></div></div><p> You are now ready to set up Fastlane for iOS and Android 🚀</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ios"></a>iOS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ios" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites"></a>Prerequisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h3><p>Before continuing make sure you have:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> Install all <a href="https://facebook.github.io/react-native/docs/getting-started.html#installing-dependencies" target="_blank" rel="noopener noreferrer">required dependencies</a>, with Xcode 9 or higher</li><li class="task-list-item"><input type="checkbox" disabled=""> Choose the <a href="https://cocoacasts.com/what-are-app-ids-and-bundle-identifiers/" target="_blank" rel="noopener noreferrer">bundle identifier</a> of your app (for example <code>com.vs.boilerplate</code>)</li><li class="task-list-item"><input type="checkbox" disabled=""> An Apple ID with an admin user, with its username (email, for example <code>dev-team@yourcompany.com</code>) and password</li><li class="task-list-item"><input type="checkbox" disabled=""> Your app name, if not already created on the Developer Portal (for example <code>React Native Boilerplate</code>). Fastlane can create applications in the Developer Portal and App Store Connect, so it&#x27;s recommended to let Fastlane do the job for you.</li><li class="task-list-item"><input type="checkbox" disabled=""> Use the right <a href="https://github.com/vahesaroyan/react-native-boilerplate/blob/master/template/ios/.gitignore" target="_blank" rel="noopener noreferrer">.gitignore</a> file inside the <code>ios</code> directory</li><li class="task-list-item"><input type="checkbox" disabled=""> You also need to create an App Icon to use Fastlane or you will get an error on running <code>fastlane beta</code>. You can simply create one using the website <a href="https://makeappicon.com/" target="_blank" rel="noopener noreferrer">MakeAppIcon</a></li></ul><p>Open your Xcode project and modify some information:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> In the <code>General</code> tab, <code>Identity</code> section, change the <code>Bundle Identifier</code> to your identifier (useful for Fastlane)</li><li class="task-list-item"><input type="checkbox" disabled=""> In the <code>Signing &amp; Capabilities</code> tab, <code>Signing</code> section, disable <code>Automatically manage signing</code></li><li class="task-list-item"><input type="checkbox" disabled=""> In the <code>Build Settings</code> tab, set view filter on top to <code>All</code> and <code>Combined</code>, then go to the <code>Signing</code> section and into <code>Code Signing Identity</code>, set <code>Don&#x27;t Code Sign</code> for the <code>debug</code> line (including <code>Any iOS SDK</code> also) and set <code>iOS Distribution</code> for the <code>release</code> line (including <code>Any iOS SDK</code> also).</li></ul><p>Like this:</p><table><thead><tr><th>Code Signing Identity</th><th>&lt; Multiple values &gt;</th></tr></thead><tbody><tr><td>Debug</td><td>Don&#x27;t Code Sign</td></tr><tr><td>Any iOS SDK</td><td>Don&#x27;t Code Sign</td></tr><tr><td>Release</td><td>iOS Distribution</td></tr><tr><td>Any iOS SDK</td><td>iOS Distribution</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-up"></a>Setting up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up" title="Direct link to heading">#</a></h3><p>First you need to set up Fastlane for your iOS project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/ios</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane init</span></div></div></div></div></div><p><em>Note: If you have an error on this step, please see the <code>issues</code> section.</em></p><p>Fastlane will automatically detect your project and ask for any missing information.</p><p>The following questions will be asked:</p><ul><li><p><code>What would you like to use fastlane for?</code></p><ul><li>For this tutorial a good answer is <code>2 - Automate beta distribution to TestFlight</code></li></ul></li><li><p><code>Select Scheme:</code></p><ul><li>Here we will select the scheme without <code>-tvOS</code> suffix</li></ul></li><li><p><code>Apple ID Username:</code></p><ul><li>If you don&#x27;t know, you didn&#x27;t read the &quot;Prerequisites&quot; step :)<br>Our answer is <code>dev-team@yourcompany.com</code></li></ul></li><li><p><code>Password (for Apple ID Username):</code></p><ul><li>If you don&#x27;t know, you didn&#x27;t read the &quot;Prerequisites&quot; step :)<br>Our answer is <code>keep it secret</code></li></ul></li><li><p>If your account has multiple teams in the App Store Connect, you may have this question: <code>Multiple App Store Connect teams found, please enter the number of the team you want to use:</code></p><ul><li>Select the right team</li></ul></li><li><p>If your account has multiple teams in the Developer Portal, you may have this question: <code>Multiple teams found on the Developer Portal, please enter the number of the team you want to use:</code></p><ul><li>Select the right team</li></ul></li><li><p>If you haven&#x27;t already created the App on the Developer Portal or App Store Connect, Fastlane can do it for you! (else you must have a message <code>Your app &#x27;com.vs.boilerplate&#x27; is available in your Apple Developer Portal / App Store Connect</code>)</p><ul><li>It will ask <code>Do you want fastlane to create the App ID for you on the Apple Developer Portal / App Store Connect? (y/n)</code><ul><li>Type <code>y</code></li></ul></li><li><code>App Name</code>:<ul><li><code>React Native Boilerplate</code></li></ul></li></ul></li></ul><p>Fastlane will then give you some information about git, the files it will create, etc. Just type <code>enter</code> to continue.</p><p><strong>Congrats!</strong> Fastlane has created some files.  </p><p>If you are using Git, commit all generated files.</p><p>Once the setup has finished you can see a new folder inside the <code>ios</code> folder:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - fastlane/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - Appfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - Fastfile</span></div></div></div></div></div><p>It&#x27;s not finish, you need to follow <code>Code Signing</code> part to setting up a provisioning profile.</p><p>For information:</p><p><code>Appfile</code> contains identifiers used to connect to the Developer Portal and App Store Connect.
You can read more about this file <a href="https://docs.fastlane.tools/advanced/#appfile" target="_blank" rel="noopener noreferrer">here</a>.</p><p><code>Fastfile</code> contains all actions you can launch.
You can read more about this file <a href="https://docs.fastlane.tools/actions" target="_blank" rel="noopener noreferrer">here</a>.
Because we previously chose <code>Automate beta distribution to TestFlight</code> on set up, a <code>beta</code> <a href="https://docs.fastlane.tools/advanced/lanes/" target="_blank" rel="noopener noreferrer">lane</a> is available by default.
This <code>lane</code> contains 3 actions:</p><ul><li>increment the build number of your app</li><li>build your app</li><li>upload to TestFlight</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="code-signing"></a>Code signing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-signing" title="Direct link to heading">#</a></h3><p>Signing your app assures users that it is from a known source and the app hasn’t been modified since it was last signed. Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a certificate issued by Apple.</p><p>A full guide is available on the fastlane doc, describing the best approaches for your <a href="https://docs.fastlane.tools/codesigning/getting-started/" target="_blank" rel="noopener noreferrer">code signing process</a>.</p><p>Using <code>match</code> is probably <a href="https://codesigning.guide/" target="_blank" rel="noopener noreferrer">the best solution</a>.<br>
Because we don&#x27;t want to revoke our existing certificates, but still want an automated setup, we will use <a href="https://docs.fastlane.tools/codesigning/getting-started/#using-cert-and-sigh" target="_blank" rel="noopener noreferrer">cert and sigh</a>.</p><p>Add the following lines to your <code>Fastfile</code>, just after the <code>increment_build_number</code> function and before <code>build_app</code> (Note that you will need to replace some information):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get_certificates( # Create or get certificate, and install it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      output_path: &quot;./builds&quot; # Download certificate in the build folder (you don&#x27;t need to create the folder)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get_provisioning_profile( # Create or get provisioning profile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      output_path: &quot;./builds&quot;,  # Download provisioning profile in the build folder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      filename: &quot;provisioning.mobileprovision&quot; # Rename the local provisioning profile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    update_project_provisioning( # Set the project provisioning profile (related in Xcode to the General &gt; Signing Release section)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      xcodeproj: &quot;Boilerplate.xcodeproj&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      target_filter: &quot;Boilerplate&quot;, # Name of your project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      profile: &quot;./builds/provisioning.mobileprovision&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      build_configuration: &quot;Release&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    update_project_team( # Set the right team on your project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      teamid: CredentialsManager::AppfileConfig.try_fetch_value(:team_id)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div></div></div></div></div><p>Then, we need to configure the provisioning profile for the build step.</p><p>Add the following lines to your <code>Fastfile</code>, inside the <code>build_app</code> function, just after the <code>scheme</code> parameter (Make sure you add a <code>,</code> after the <code>scheme</code> parameter):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    clean: true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    export_method: &quot;app-store&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    export_options: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      provisioningProfiles: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          CredentialsManager::AppfileConfig.try_fetch_value(:app_identifier) =&gt; CredentialsManager::AppfileConfig.try_fetch_value(:app_identifier) + &quot; AppStore&quot; # Value of this parameter is the name of the Provisioning Profile. By default, it will be &quot;{bundleId} AppStore&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    build_path: &quot;./builds&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    output_directory: &quot;./builds&quot;</span></div></div></div></div></div><p>Thanks to this the Certificates and Provisioning Profile will be automatically created when you will create a beta build!<br>
🚀 You are now ready to create your first beta build.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="creating-a-beta-build"></a>Creating a beta build<a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-a-beta-build" title="Direct link to heading">#</a></h3><p>Creating a beta build and uploading it on TestFlight is now really easy.<br>
Just type the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/ios</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane beta</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="android"></a>Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#android" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites-1"></a>Prerequisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites-1" title="Direct link to heading">#</a></h3><p>Before continuing make sure you have:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> A Google Play Console <em>admin</em> account and its username (email, for example <code>dev-team@yourcompany.com</code>) and password</li><li class="task-list-item"><input type="checkbox" disabled=""> Create your application in the Google Play Console (unlike for iOS Fastlane cannot do that for you)</li><li class="task-list-item"><input type="checkbox" disabled=""> Use the right <a href="https://github.com/vahesaroyan/react-native-boilerplate/blob/master/template/android/.gitignore" target="_blank" rel="noopener noreferrer">.gitignore</a> file inside the <code>android</code> directory (if you are using this boilerplate you are good to go)</li><li class="task-list-item"><input type="checkbox" disabled=""> <a href="https://docs.fastlane.tools/getting-started/android/setup/#collect-your-google-credentials" target="_blank" rel="noopener noreferrer">Collect your Google Credentials</a><br>⚠️ In the Google Play Console, add the parameter <code>&amp;hl=en</code> at the end of the URL (before any #) to switch to English. In some languages, the &quot;Create Service Account&quot; will not be available.
Download the JSON key file, and copy it into <code>my-project/android/key.json</code></li><li class="task-list-item"><input type="checkbox" disabled=""> Install <a href="https://facebook.github.io/react-native/docs/getting-started.html#installing-dependencies-1" target="_blank" rel="noopener noreferrer">all dependencies</a> for macOS and Android</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-up-1"></a>Setting up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-1" title="Direct link to heading">#</a></h3><p>First you need to set up Fastlane for your android project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/android</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane init</span></div></div></div></div></div><p>Fastlane will automatically detect your project and ask for any missing information.</p><p>The following questions will be asked:</p><ul><li><code>Package Name (com.krausefx.app)</code><ul><li>Our answer is <code>com.vs.boilerplate</code></li></ul></li><li><code>Path to the json secret file</code><ul><li>Type <code>key.json</code> (path to the file previously created in the Prerequisites step)</li></ul></li><li>Download existing metadata and setup metadata management?<ul><li><code>y</code></li></ul></li></ul><p>Fastlane will then give you some information about git, the files it will create, etc. Just type <code>enter</code> to continue.</p><p>Congrats! Fastlane has created some files.<br>
If you are using Git, commit all generated files.</p><p>Once the setup has finished you can see a new folder inside the <code>android</code> folder:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - fastlane/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - Appfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - Fastfile</span></div></div></div></div></div><p><code>Appfile</code> contains identifiers used to connect to the Google Play Console and the link to the <code>key.json</code> file.<br>
You can read more about this file <a href="https://docs.fastlane.tools/advanced/#appfile" target="_blank" rel="noopener noreferrer">here</a>.</p><p><code>Fastfile</code> contains all actions you can launch.
You can read more about this file <a href="https://docs.fastlane.tools/actions" target="_blank" rel="noopener noreferrer">here</a>.<br>
A <code>beta [lane](https://docs.fastlane.tools/advanced/lanes/)</code>, a <code>deploy lane</code> and a <code>test lane</code> are available by default.  </p><p>You can remove the <code>deploy lane</code> to avoid some mistakes, and replace the <code>beta</code> lane by the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  desc &quot;Submit a new Beta Build to Play Store&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  lane :beta do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    store_password = prompt(text: &quot;Signing Store Password: &quot;, secure_text: true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    key_password = prompt(text: &quot;Alias Key Password: &quot;, secure_text: true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    releaseFilePath = File.join(Dir.pwd, &quot;..&quot;, &quot;my-release-key.keystore&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gradle(task: &#x27;clean&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gradle(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      task: &#x27;assemble&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      build_type: &#x27;Release&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      print_command: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      properties: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.store.file&quot; =&gt; releaseFilePath,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.store.password&quot; =&gt; store_password,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.key.alias&quot; =&gt; &quot;my-key-alias&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.key.password&quot; =&gt; key_password,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    upload_to_play_store(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      track: &#x27;internal&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div></div></div></div></div><p>As you can see, we need to sign our APK with a signing key.
Don&#x27;t worry, we will generate it in a moment, let&#x27;s just explain what the lane do.</p><p>First, script ask the user two values : signing store and alias key passwords, with the <a href="https://docs.fastlane.tools/actions/prompt/" target="_blank" rel="noopener noreferrer"><code>prompt</code></a> fastlane plugin.
Asking the user those passwords ensure that no secret keys are stored into your app.<br>
Then, this lane clean your project, assemble the application, automatically injecting signing configuration at runtime, before uploading it in the Google Play Store.<br>
Upload is made <code>internally</code>, that means only internal testers will be allowed to download the app. You can learn more about different test types <a href="https://support.google.com/googleplay/android-developer/answer/3131213" target="_blank" rel="noopener noreferrer">here</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="generating-a-signing-key"></a>Generating a signing key<a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-a-signing-key" title="Direct link to heading">#</a></h4><p><a href="https://facebook.github.io/react-native/docs/signed-apk-android#generating-a-signing-key" target="_blank" rel="noopener noreferrer">Official documentation</a> well explained how to generate a signing key.</p><p>You simply need to run the following :</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize </span><span class="token number" style="color:rgb(247, 140, 108)">2048</span><span class="token plain"> -validity </span><span class="token number" style="color:rgb(247, 140, 108)">10000</span></div></div></div></div></div><p>This command prompts you for passwords for the keystore and key and for the Distinguished Name fields for your key.<br>
It then generates the keystore as a file called <code>my-release-key.keystore</code></p><p>Note: Remember to keep your keystore file private and never commit it to version control.</p><p>Copy the generated <code>my-release-key.keystore</code> file into the root of <code>android</code> folder.</p><p>You&#x27;re now good to build and deploy !</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="creating-a-beta-build-1"></a>Creating a beta build<a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-a-beta-build-1" title="Direct link to heading">#</a></h3><p>⚠️ The first time you deploy your application, you MUST upload it into Google Play Console <code>manually</code>.
Google don&#x27;t allow to use theirs APIs for the first upload.<br>
To do this, comment the three last lines of the <code>Fastfile</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#upload_to_play_store(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#      track: &#x27;internal&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#    )</span></div></div></div></div></div><p>or create a new lane without those lines.</p><p>❗ There is no official plugin to automatically upgrade android version code (unlike the iOS lane).<br>
Before each deployment, be sure to <code>manually</code> upgrade the <code>versionCode</code> value inside <code>android/app/build.gradle</code>.<br>
We are working on an automatic way to do this.  </p><p>Creating a beta build and uploading it on Google Play is now really easy.<br>
Just type the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/android</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane beta</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="troubleshooting"></a>Troubleshooting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stuck-at-bundle-install-or-bundle-update-running-fastlane-init"></a>Stuck at <code>bundle install</code> or <code>bundle update</code> running <code>fastlane init</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stuck-at-bundle-install-or-bundle-update-running-fastlane-init" title="Direct link to heading">#</a></h3><p>If the <code>fastlane init</code> process is stuck when running <code>bundle install</code> or <code>bundle update</code> it may mean that <code>bundle</code> command is asking for root permissions.<br>
You can stop the process and retry again with <code>sudo fastlane init</code>, however you will need to change back ownership of the generated files to your user when it finishes by running this command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo chown &lt;your-user&gt; &lt;files&gt;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="permission-denied-running-android-beta-lane"></a>Permission denied running android beta lane<a aria-hidden="true" tabindex="-1" class="hash-link" href="#permission-denied-running-android-beta-lane" title="Direct link to heading">#</a></h3><p>If you have a <code>Permission denied</code> issue on an android beta build, please run:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ chmod a+x /my-project/android/gradlew</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="fastlane-init-failed"></a>Fastlane init failed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#fastlane-init-failed" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fastlane init failed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;The request could not be completed because:&quot;, &quot;Could not receive latest API key from App Store Connect, this might be a server issue.&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Something failed while running `fastlane init`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tried using Apple ID with email &#x27;dev-team@yourcompany.com&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">You can either retry, or fallback to manual setup which will create a basic Fastfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Would you like to fallback to a manual Fastfile? (y/n)</span></div></div></div></div></div><p>Answer <code>n</code>, and retry previous steps with a correct Apple ID and password.<br>
Make sure you are connected to internet.</p><hr><p>If you need more informations, don&#x27;t hesitate to read the <a href="https://docs.fastlane.tools/" target="_blank" rel="noopener noreferrer">fastlane documentation</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/vahesaroyan/react-native-boilerplate-ts/edit/master/website-documentation/docs/docs/3_Guides/BetaBuild.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/react-native-boilerplate-ts/docs/UsingFlipper"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Using Flipper 🐛</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-start" class="table-of-contents__link">Before you start</a></li><li><a href="#installing-fastlane" class="table-of-contents__link">Installing Fastlane</a></li><li><a href="#ios" class="table-of-contents__link">iOS</a><ul><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#setting-up" class="table-of-contents__link">Setting up</a></li><li><a href="#code-signing" class="table-of-contents__link">Code signing</a></li><li><a href="#creating-a-beta-build" class="table-of-contents__link">Creating a beta build</a></li></ul></li><li><a href="#android" class="table-of-contents__link">Android</a><ul><li><a href="#prerequisites-1" class="table-of-contents__link">Prerequisites</a></li><li><a href="#setting-up-1" class="table-of-contents__link">Setting up</a></li><li><a href="#creating-a-beta-build-1" class="table-of-contents__link">Creating a beta build</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#stuck-at-bundle-install-or-bundle-update-running-fastlane-init" class="table-of-contents__link">Stuck at <code>bundle install</code> or <code>bundle update</code> running <code>fastlane init</code></a></li><li><a href="#permission-denied-running-android-beta-lane" class="table-of-contents__link">Permission denied running android beta lane</a></li><li><a href="#fastlane-init-failed" class="table-of-contents__link">Fastlane init failed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="/react-native-boilerplate-ts/img/logo.png"></div><div>Copyright © 2022 VS, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/react-native-boilerplate-ts/styles.80ce7e63.js"></script>
<script src="/react-native-boilerplate-ts/runtime~main.2bb91438.js"></script>
<script src="/react-native-boilerplate-ts/main.c1faeead.js"></script>
<script src="/react-native-boilerplate-ts/1.9a05bac7.js"></script>
<script src="/react-native-boilerplate-ts/2.1323f2fb.js"></script>
<script src="/react-native-boilerplate-ts/19.dce75683.js"></script>
<script src="/react-native-boilerplate-ts/22.8f2cd069.js"></script>
<script src="/react-native-boilerplate-ts/935f2afb.6fcf0dd2.js"></script>
<script src="/react-native-boilerplate-ts/17896441.27d65e94.js"></script>
<script src="/react-native-boilerplate-ts/52f0a39e.eb810e28.js"></script>
</body>
</html>